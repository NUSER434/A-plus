<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\Service;
use App\Models\Portfolio;

class AllServicesController extends Controller
{
     // Страница со всеми услугами
     public function index()
     {
         // Получаем все категории услуг
         $categories = Service::distinct()->pluck('category');
 
         // Получаем все услуги
         $services = Service::all();
 
         return view('all-services', compact('categories', 'services'));
     }
 
     // Страница отдельной услуги
     public function show($slug)
     {
         // Находим услугу по slug
        $service = Service::where('slug', $slug)->firstOrFail();

        // Получаем случайные услуги (исключая текущую)
        $randomServices = Service::where('id', '!=', $service->id)->inRandomOrder()->take(8)->get();

        // Получаем примеры работ из портфолио по категории услуги
        $portfolios = Portfolio::where('category', $service->category)->get();

        // Параметры калькулятора для каждой категории
    $calculatorData = [
        'Визитки' => [
            'Макет' => ['Есть макет' => 0, 'Доверюсь вам' => 500],
            'Размеры' => ['40x40 мм' => 100, '50x50 мм' => 150, '60x60 мм' => 200, '85x55 мм' => 120, '90x50 мм' => 130],
            'Печать' => ['Односторонние' => 0, 'Двухсторонние' => 200],
            'Бумага' => ['Матовая' => 0, 'Глянцевая' => 100, 'Текстурная' => 150],
            'Скругление углов' => ['Да' => 50, 'Нет' => 0],
            'Количество' => ['100' => 1000, '200' => 1800, '500' => 3500, '1000' => 6000],
        ],
        'Листовая полиграфия' => [
            'Размер' => ['A4' => 100, 'A3' => 150, 'A5' => 80],
            'Печать' => ['Односторонняя' => 0, 'Двухсторонняя' => 200],
            'Бумага' => ['Матовая' => 0, 'Глянцевая' => 100, 'Текстурная' => 150],
            'Плотность бумаги' => ['80 г/м²' => 0, '120 г/м²' => 50, '160 г/м²' => 100],
            'Ламинация' => ['Да' => 100, 'Нет' => 0],
            'Количество' => ['100' => 1000, '200' => 1800, '500' => 3500, '1000' => 6000],
        ],
        'Одежда' => [
            'Тип' => ['Мужской' => 0, 'Женский' => 0],
            'Размер' => ['S' => 0, 'M' => 50, 'L' => 50, 'XL' => 100],
            'Цвет' => ['Черный' => 0, 'Белый' => 50, 'Синий' => 50],
            'Место нанесения' => ['Спина' => 0, 'Грудь' => 50, 'Рукав' => 50],
            'Количество' => ['1' => 500, '2' => 900, '3' => 1300],
        ],
        'Календари' => [
            'Размер' => ['A4' => 100, 'A3' => 150, 'A5' => 80],
            'Ориентация' => ['Портретная' => 0, 'Альбомная' => 50],
            'Материал' => ['Картон' => 0, 'Пластик' => 100],
            'Ламинирование' => ['Да' => 100, 'Нет' => 0],
            'Скругление углов' => ['Да' => 50, 'Нет' => 0],
            'Количество' => ['10' => 500, '20' => 900, '50' => 1500],
        ],
        'Наклейки' => [
            'Размеры подложки' => ['A4' => 100, 'A3' => 150, 'A5' => 80],
            'Материал' => ['Винил' => 0, 'Бумага' => 50],
            'Вид материала' => ['Матовый' => 0, 'Глянцевый' => 50],
            'Ламинация' => ['Да' => 100, 'Нет' => 0],
            'Количество' => ['100' => 1000, '200' => 1800, '500' => 3500, '1000' => 6000],
        ],
        'Многостраничная полиграфия' => [
            'Тип изделия' => ['Блокнот' => 0, 'Каталог' => 100],
            'Количество страниц' => ['16' => 0, '32' => 50, '64' => 100],
            'Переплет' => ['Мягкий' => 0, 'Твердый' => 100],
            'Бумага' => ['Матовая' => 0, 'Глянцевая' => 50],
            'Количество' => ['100' => 1000, '200' => 1800, '500' => 3500, '1000' => 6000],
        ],
    ];

        return view('service', compact('service', 'randomServices', 'portfolios', 'calculatorData'));
     }
}
